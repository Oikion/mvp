# =============================================================================
# OIKION MVP - Environment Variables Configuration
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# cp env.local.example .env.local
# =============================================================================

# =============================================================================
# CORE - REQUIRED (App won't work without these)
# =============================================================================

# Database Connection
# Format: postgres://user:password@host:port/database
# Or for Prisma Accelerate: prisma+postgres://accelerate.prisma-data.net/?api_key=...
# Or for Neon: postgres://user:password@ep-xxx-xxx.region.aws.neon.tech/db?sslmode=require
DATABASE_URL="postgres://user:password@localhost:5432/oikion_dev"

# Clerk Authentication - Secret Key (Server-side)
# Get from: Clerk Dashboard → API Keys → Secret Key
# Format: sk_test_... or sk_live_...
CLERK_SECRET_KEY="sk_test_your_secret_key_here"

# Clerk Authentication - Publishable Key (Client-side)
# Get from: Clerk Dashboard → API Keys → Publishable Key
# Format: pk_test_... or pk_live_...
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_your_publishable_key_here"

# Clerk Proxy URL (Required when using custom domain to avoid CORS issues)
# Set to "/__clerk" to proxy Clerk requests through your app domain
# This allows Clerk to work with custom domains without CORS errors
NEXT_PUBLIC_CLERK_PROXY_URL="/__clerk"

# Clerk Webhook Secret (Required ONLY if webhooks are configured in Clerk)
# Get from: Clerk Dashboard → Webhooks → Endpoint → Signing Secret
# Format: whsec_...
# NOTE: If you don't have webhooks set up, this is optional. The app will sync users
# on-demand when they access the app. However, webhooks provide better real-time sync.
# If you configure webhooks later, you'll need this secret.
CLERK_WEBHOOK_SECRET="whsec_your_webhook_secret_here"

# Application Base URL
# The root domain (no trailing slash)
# App pages are served at /:locale/app/ (e.g., oikion.com/en/app/)
# For production: https://oikion.com
# For local dev: http://localhost:3000 or https://localhost:3000
NEXT_PUBLIC_APP_URL="https://oikion.com"

# Application Version
# Displayed in website footer, app footer, and feedback module
# Format: MAJOR.MINOR.PATCH-STAGE (e.g., "0.1.0-alpha", "1.0.0-beta", "2.0.0")
# This is the single source of truth for app version across all UI components
NEXT_PUBLIC_APP_V="0.1.0-alpha"

# Authentication URL (for Auth.js callbacks)
# Should match NEXT_PUBLIC_APP_URL
AUTH_URL="https://oikion.com"

# Authentication Secret (for session encryption)
# Generate with: openssl rand -base64 32
# Or use any secure random string (minimum 32 characters)
AUTH_SECRET="your_auth_secret_here_min_32_chars"

# =============================================================================
# IMPORTANT - Core Features (App works but features won't function)
# =============================================================================

# Email Service - Resend API Key
# Get from: https://resend.com/api-keys
# Required for: User invitations, password resets, notifications
RESEND_API_KEY="re_your_resend_api_key_here"

# Email From Address
# Format: "Display Name <email@domain.com>"
# Must be verified in Resend dashboard
# Used for both Development and Production
EMAIL_FROM="Oikion <mail@oikion.com>"

# Resend Audience/Segment IDs (for newsletter subscriptions)
# Newsletter segment for general subscribers
# RESEND_NEWSLETTER_SEGMENT_ID="523e97e1-4a3b-4c07-9de4-fac059f8f7d9"
# Early Access segment for pre-alpha interested users
# RESEND_EARLY_ACCESS_SEGMENT_ID="179316b4-7877-4b51-b7c2-f0a3a496af77"

# =============================================================================
# OPTIONAL - Feature-Specific (Only needed if using these features)
# =============================================================================

# -----------------------------------------------------------------------------
# Stripe Payment Processing
# -----------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/apikeys
# Required for: Subscription payments, billing
STRIPE_API_KEY="pk_test_your_stripe_api_key_here"
STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret_here"
NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PLAN_ID="price_xxxxx"
NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PLAN_ID="price_xxxxx"
NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PLAN_ID="price_xxxxx"
NEXT_PUBLIC_STRIPE_PRO_YEARLY_PLAN_ID="price_xxxxx"

# -----------------------------------------------------------------------------
# Google OAuth (Social Login)
# -----------------------------------------------------------------------------
# Get from: https://console.cloud.google.com/apis/credentials
# Required for: Google sign-in
GOOGLE_CLIENT_ID="your_google_client_id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="GOCSPX-your_google_client_secret"

# -----------------------------------------------------------------------------
# Vercel Blob Storage (File/Document Storage)
# -----------------------------------------------------------------------------
# Get from: Vercel Dashboard → Storage → Blob → Environment Variables
# Required for: Document uploads, file storage
# Format: vercel_blob_rw_...
# NOTE: Your current .env.local has MVP_READ_WRITE_TOKEN but code expects BLOB_READ_WRITE_TOKEN
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_your_token_here"

# =============================================================================
# DEVELOPMENT/ADMIN - Optional (Development & Admin Features)
# =============================================================================

# Platform Admin - Development Emails
# Comma-separated list of emails that get admin access in non-production
# Only works when NODE_ENV !== "production"
# Format: "email1@example.com,email2@example.com"
PLATFORM_ADMIN_DEV_EMAILS="admin@example.com"

# Vercel OIDC Token (For Vercel CLI automation)
# Get from: Vercel CLI or Dashboard
# Only needed if using Vercel CLI for deployments
# Not used by application code - can be removed if not using Vercel CLI
VERCEL_OIDC_TOKEN="your_vercel_oidc_token_here"

# =============================================================================
# EXTERNAL API - Optional (For cron jobs and external integrations)
# =============================================================================

# Cron Secret (For securing cron endpoints)
# Generate with: openssl rand -base64 32
# Used by: /api/cron/* endpoints to verify authorized cron requests
CRON_SECRET="your_cron_secret_here"

# -----------------------------------------------------------------------------
# xe.gr Bulk Import Tool (Portal Publishing)
# -----------------------------------------------------------------------------
# Get credentials from xe.gr after onboarding to BIT API
# Base URL defaults to http://import.xe.gr (override if xe.gr provides a test host)
XE_GR_USERNAME="your_xe_gr_username"
XE_GR_PASSWORD="your_xe_gr_password"
XE_GR_AUTHTOKEN="optional_auth_token_if_required"
XE_GR_BASE_URL="http://import.xe.gr"

# =============================================================================
# N8N AUTOMATION - Optional (For workflow automation)
# =============================================================================
# Required for: Blog posts, social media, newsletter automation via n8n

# n8n Instance URL (your self-hosted n8n)
# For local dev: http://localhost:5678
# For production: https://n8n.yourdomain.com
N8N_BASE_URL="http://localhost:5678"

# n8n API Key (for Oikion Platform Admin workflow controls: list/activate/run)
# Create in n8n: Settings → n8n API → Create API key
# Oikion sends this as: X-N8N-API-KEY
N8N_API_KEY="your_n8n_api_key_here"

# Webhook Secret (for validating incoming n8n webhooks)
# Generate with: openssl rand -hex 32
# Must match OIKION_WEBHOOK_SECRET in n8n configuration
N8N_WEBHOOK_SECRET="your_n8n_webhook_secret_here"

# Allowed frame ancestors for n8n embedding (comma-separated)
# Should include your Oikion domain for iframe embedding
N8N_ALLOWED_ORIGINS="http://localhost:3000,https://oikion.com"

# =============================================================================
# ABLY REAL-TIME MESSAGING - Optional (For real-time chat/messaging)
# =============================================================================
# Required for: DMs, organization channels, real-time messaging
# Uses your existing PostgreSQL database + Ably for real-time updates
# Get started: https://ably.com (free tier: 6M messages/month)

# Ably API Key (for server-side token requests)
# Get from: Ably Dashboard → Your App → API Keys → Copy "Root" key
# Format: XXXXX.YYYYYY:ZZZZZZZZZZZZZZZZZZ
# This key is used server-side only to generate client tokens
ABLY_API_KEY="your_ably_api_key_here"

# =============================================================================
# NOTES
# =============================================================================
# 1. Never commit .env.local to git (it's in .gitignore)
# 2. For production, set these in your deployment platform (Vercel, etc.)
# 3. All NEXT_PUBLIC_* variables are exposed to the browser
# 4. Keep secrets secure and rotate them regularly
# 5. Use different keys for development and production
# 6. CLERK_WEBHOOK_SECRET is only required if webhooks are configured in Clerk Dashboard
#    Without webhooks, user sync happens on-demand (when users access the app)
# 7. Rename MVP_READ_WRITE_TOKEN to BLOB_READ_WRITE_TOKEN if using Blob storage
# 8. Messaging uses Ably for real-time updates (free tier: 6M messages/month)
#    - Works with Vercel serverless (no custom server needed)
#    - Get API key at https://ably.com
# =============================================================================
