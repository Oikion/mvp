generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AgentConnection {
  id                                       String           @id
  followerId                               String
  followingId                              String
  status                                   ConnectionStatus @default(PENDING)
  createdAt                                DateTime         @default(now())
  updatedAt                                DateTime
  Users_AgentConnection_followerIdToUsers  Users            @relation("AgentConnection_followerIdToUsers", fields: [followerId], references: [id], onDelete: Cascade)
  Users_AgentConnection_followingIdToUsers Users            @relation("AgentConnection_followingIdToUsers", fields: [followingId], references: [id], onDelete: Cascade)

  @@unique([followerId, followingId])
  @@index([followerId])
  @@index([followingId])
  @@index([status])
}

model AgentProfile {
  id                      String                    @id
  userId                  String                    @unique
  slug                    String                    @unique
  bio                     String?
  publicPhone             String?
  publicEmail             String?
  specializations         String[]
  serviceAreas            String[]
  languages               String[]
  yearsExperience         Int?
  certifications          String[]
  socialLinks             Json?
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime
  visibility              ProfileVisibility         @default(PERSONAL)
  hideFromAgentSearch     Boolean                   @default(false)
  Users                   Users                     @relation(fields: [userId], references: [id], onDelete: Cascade)
  ProfileShowcaseProperty ProfileShowcaseProperty[]

  @@index([hideFromAgentSearch])
  @@index([slug])
  @@index([visibility])
}

model Audience {
  id             String           @id
  name           String
  description    String?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime
  createdById    String
  organizationId String?
  isAutoSync     Boolean          @default(false)
  Users          Users            @relation(fields: [createdById], references: [id], onDelete: Cascade)
  AudienceMember AudienceMember[]
  SharedEntity   SharedEntity[]

  @@index([createdById])
  @@index([organizationId])
}

model AudienceMember {
  id         String   @id
  audienceId String
  userId     String
  addedAt    DateTime @default(now())
  Audience   Audience @relation(fields: [audienceId], references: [id], onDelete: Cascade)
  Users      Users    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([audienceId, userId])
  @@index([audienceId])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model CalComEvent {
  id                 String               @id
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  calcomEventId      Int                  @unique
  calcomUserId       Int                  @default(0)
  organizationId     String               @default("00000000-0000-0000-0000-000000000000")
  title              String?
  description        String?
  startTime          DateTime
  endTime            DateTime
  location           String?
  status             String?
  attendeeEmail      String?
  attendeeName       String?
  notes              String?
  assignedUserId     String?
  documentIds        String[]
  recurrenceRule     String?
  reminderMinutes    Int[]
  remindersSent      Json?
  eventType          CalendarEventType?
  Users              Users?               @relation(fields: [assignedUserId], references: [id])
  CalendarReminder   CalendarReminder[]
  EventInvitee       EventInvitee[]
  crm_Accounts_Tasks crm_Accounts_Tasks[]
  Documents          Documents[]          @relation("DocumentsToCalComEvents")
  Clients            Clients[]            @relation("EventToClients")
  Properties         Properties[]         @relation("EventToProperties")

  @@index([assignedUserId])
  @@index([calcomEventId])
  @@index([eventType])
  @@index([organizationId])
  @@index([startTime])
}

model CalendarReminder {
  id               String           @id
  createdAt        DateTime         @default(now())
  updatedAt        DateTime
  eventId          String
  reminderMinutes  Int
  scheduledFor     DateTime
  sentAt           DateTime?
  status           ReminderStatus   @default(PENDING)
  notificationType NotificationType @default(EMAIL)
  organizationId   String           @default("00000000-0000-0000-0000-000000000000")
  CalComEvent      CalComEvent      @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@index([eventId])
  @@index([organizationId])
  @@index([scheduledFor])
  @@index([status])
}

model ClientComment {
  id        String   @id
  createdAt DateTime @default(now())
  updatedAt DateTime
  clientId  String
  userId    String
  content   String
  Clients   Clients  @relation(fields: [clientId], references: [id], onDelete: Cascade)
  Users     Users    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@index([createdAt])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Client_Contacts {
  id                                       String             @id
  client                                   String?
  assigned_to                              String?
  birthday                                 String?
  created_by                               String?
  createdBy                                String?
  created_on                               DateTime?          @default(now())
  cratedAt                                 DateTime?          @default(now())
  last_activity                            DateTime?          @default(now())
  updatedAt                                DateTime?
  updatedBy                                String?
  last_activity_by                         String?
  description                              String?
  email                                    String?
  personal_email                           String?
  contact_first_name                       String?
  contact_last_name                        String
  office_phone                             String?
  mobile_phone                             String?
  website                                  String?
  position                                 String?
  status                                   Boolean            @default(true)
  contact_type                             ClientContactType?
  relationship_to_client                   String?
  type                                     String?            @default("Customer")
  tags                                     String[]
  notes                                    String[]
  clientsIDs                               String?
  documentsIDs                             String[]
  organizationId                           String             @default("00000000-0000-0000-0000-000000000000")
  Users_Client_Contacts_assigned_toToUsers Users?             @relation("Client_Contacts_assigned_toToUsers", fields: [assigned_to], references: [id])
  Clients                                  Clients?           @relation(fields: [clientsIDs], references: [id])
  Users_Client_Contacts_created_byToUsers  Users?             @relation("Client_Contacts_created_byToUsers", fields: [created_by], references: [id])
  Documents                                Documents[]        @relation("DocumentsToClientContacts")

  @@index([assigned_to])
  @@index([clientsIDs])
  @@index([created_on])
  @@index([organizationId])
}

model Client_Properties {
  id         String     @id
  createdAt  DateTime   @default(now())
  clientId   String
  propertyId String
  Clients    Clients    @relation(fields: [clientId], references: [id], onDelete: Cascade)
  Properties Properties @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  @@unique([clientId, propertyId])
  @@index([clientId])
  @@index([propertyId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Clients {
  id                               String               @id
  createdAt                        DateTime             @default(now())
  createdBy                        String?
  updatedAt                        DateTime?
  updatedBy                        String?
  assigned_to                      String?
  client_name                      String
  primary_email                    String?
  client_type                      ClientType?
  client_status                    ClientStatus?        @default(LEAD)
  property_preferences             Json?
  communication_notes              Json?
  billing_city                     String?
  billing_country                  String?
  billing_postal_code              String?
  billing_state                    String?
  billing_street                   String?
  company_id                       String?
  description                      String?
  fax                              String?
  member_of                        String?
  office_phone                     String?
  shipping_city                    String?
  shipping_country                 String?
  shipping_postal_code             String?
  shipping_state                   String?
  shipping_street                  String?
  vat                              String?
  website                          String?
  documentsIDs                     String[]
  watchers                         String[]
  organizationId                   String               @default("00000000-0000-0000-0000-000000000000")
  afm                              String?
  allow_marketing                  Boolean?             @default(false)
  areas_of_interest                Json?
  budget_max                       Decimal?
  budget_min                       Decimal?
  channels                         String[]
  company_gemi                     String?
  company_name                     String?
  doy                              String?
  draft_status                     Boolean?             @default(false)
  financing_type                   FinancingType?
  full_name                        String?
  gdpr_consent                     Boolean?             @default(false)
  id_doc                           String?
  intent                           ClientIntent?
  language                         Language?            @default(en)
  lead_source                      LeadSource?
  needs_mortgage_help              Boolean?             @default(false)
  person_type                      PersonType?
  preapproval_bank                 String?
  primary_phone                    String?
  purpose                          PropertyPurpose?
  secondary_email                  String?
  secondary_phone                  String?
  timeline                         Timeline?
  ClientComment                    ClientComment[]
  Client_Contacts                  Client_Contacts[]
  Client_Properties                Client_Properties[]
  Users_Clients_assigned_toToUsers Users?               @relation("Clients_assigned_toToUsers", fields: [assigned_to], references: [id])
  Deal                             Deal[]
  crm_Accounts_Tasks               crm_Accounts_Tasks[]
  Documents                        Documents[]          @relation("DocumentsToClients")
  CalComEvent                      CalComEvent[]        @relation("EventToClients")
  Users_watching_accounts          Users[]              @relation("watching_accounts")

  @@index([assigned_to])
  @@index([client_status])
  @@index([createdAt])
  @@index([organizationId])
}

model Deal {
  id                                String     @id
  organizationId                    String?
  propertyId                        String
  clientId                          String
  propertyAgentId                   String
  clientAgentId                     String
  propertyAgentSplit                Decimal    @default(50)
  clientAgentSplit                  Decimal    @default(50)
  totalCommission                   Decimal?
  commissionCurrency                String     @default("EUR")
  status                            DealStatus @default(PROPOSED)
  proposedById                      String
  title                             String?
  notes                             String?
  closedAt                          DateTime?
  createdAt                         DateTime   @default(now())
  updatedAt                         DateTime
  Users_Deal_clientAgentIdToUsers   Users      @relation("Deal_clientAgentIdToUsers", fields: [clientAgentId], references: [id])
  Clients                           Clients    @relation(fields: [clientId], references: [id])
  Users_Deal_propertyAgentIdToUsers Users      @relation("Deal_propertyAgentIdToUsers", fields: [propertyAgentId], references: [id])
  Properties                        Properties @relation(fields: [propertyId], references: [id])

  @@index([clientAgentId])
  @@index([clientId])
  @@index([organizationId])
  @@index([propertyAgentId])
  @@index([propertyId])
  @@index([status])
}

model DocumentTemplate {
  id            String       @id
  name          String
  nameEn        String
  nameEl        String
  description   String?
  descriptionEl String?
  templateType  TemplateType
  placeholders  Json
  docxUrl       String?
  isActive      Boolean      @default(true)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime

  @@index([isActive])
  @@index([templateType])
}

model DocumentView {
  id              String    @id
  documentId      String
  viewedAt        DateTime  @default(now())
  viewerIp        String?
  viewerUserAgent String?
  viewerUserId    String?
  Documents       Documents @relation(fields: [documentId], references: [id], onDelete: Cascade)
  Users           Users?    @relation(fields: [viewerUserId], references: [id])

  @@index([documentId])
  @@index([viewedAt])
  @@index([viewerUserId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Documents {
  id                                             String               @id
  date_created                                   DateTime?            @default(now())
  createdAt                                      DateTime?            @default(now())
  last_updated                                   DateTime?
  updatedAt                                      DateTime?
  document_name                                  String
  created_by_user                                String?
  createdBy                                      String?
  description                                    String?
  document_type                                  String?
  favourite                                      Boolean?
  document_file_mimeType                         String
  document_file_url                              String
  status                                         String?
  visibility                                     String?
  tags                                           Json?
  key                                            String?
  size                                           Int?
  assigned_user                                  String?
  connected_documents                            String[]
  contactsIDs                                    String[]
  crm_accounts_tasksIDs                          String[]
  accountsIDs                                    String[]
  document_system_type                           DocumentSystemType?  @default(OTHER)
  expiresAt                                      DateTime?
  lastViewedAt                                   DateTime?
  linkEnabled                                    Boolean              @default(false)
  linkedCalComEventsIds                          String[]
  linkedPropertiesIds                            String[]
  linkedTasksIds                                 String[]
  mentions                                       Json?
  passwordHash                                   String?
  passwordProtected                              Boolean              @default(false)
  shareableLink                                  String?              @unique
  viewsCount                                     Int                  @default(0)
  organizationId                                 String               @default("00000000-0000-0000-0000-000000000000")
  DocumentView                                   DocumentView[]
  Users_Documents_assigned_userToUsers           Users?               @relation("Documents_assigned_userToUsers", fields: [assigned_user], references: [id])
  Users_Documents_created_by_userToUsers         Users?               @relation("Documents_created_by_userToUsers", fields: [created_by_user], references: [id])
  Documents_Types                                Documents_Types?     @relation(fields: [document_type], references: [id])
  CalComEvent                                    CalComEvent[]        @relation("DocumentsToCalComEvents")
  Client_Contacts                                Client_Contacts[]    @relation("DocumentsToClientContacts")
  Clients                                        Clients[]            @relation("DocumentsToClients")
  crm_Accounts_Tasks_DocumentsToCrmAccountsTasks crm_Accounts_Tasks[] @relation("DocumentsToCrmAccountsTasks")
  Properties                                     Properties[]
  crm_Accounts_Tasks_DocumentsToTasksExplicit    crm_Accounts_Tasks[] @relation("DocumentsToTasksExplicit")

  @@index([assigned_user])
  @@index([created_by_user])
  @@index([date_created])
  @@index([linkEnabled])
  @@index([organizationId])
  @@index([shareableLink])
}

model Documents_Types {
  id        String      @id
  name      String
  Documents Documents[]
}

model Employees {
  id     String  @id
  avatar String
  email  String?
  name   String
  salary Int
  status String
}

model EventInvitee {
  id             String       @id
  eventId        String
  userId         String
  status         InviteStatus @default(PENDING)
  respondedAt    DateTime?
  createdAt      DateTime     @default(now())
  organizationId String       @default("00000000-0000-0000-0000-000000000000")
  CalComEvent    CalComEvent  @relation(fields: [eventId], references: [id], onDelete: Cascade)
  Users          Users        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([eventId, userId])
  @@index([eventId])
  @@index([organizationId])
  @@index([status])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Feedback {
  id               String            @id
  createdAt        DateTime          @default(now())
  userId           String?
  userEmail        String?
  userName         String?
  organizationId   String            @default("00000000-0000-0000-0000-000000000000")
  feedbackType     String
  feedback         String
  url              String?
  userAgent        String?
  browserName      String?
  browserVersion   String?
  osName           String?
  osVersion        String?
  screenResolution String?
  hasScreenshot    Boolean           @default(false)
  hasConsoleLogs   Boolean           @default(false)
  consoleLogsCount Int?              @default(0)
  emailSent        Boolean           @default(false)
  emailSentAt      DateTime?
  adminNotes       String?
  consoleLogs      Json?
  reviewedAt       DateTime?
  reviewedBy       String?
  screenshot       String?
  status           String            @default("pending")
  adminResponse    String?
  respondedAt      DateTime?
  respondedBy      String?           @db.VarChar(255)
  Users            Users?            @relation(fields: [userId], references: [id], onDelete: Cascade)
  FeedbackComment  FeedbackComment[]
  attachments      Attachment[]

  @@index([createdAt])
  @@index([feedbackType])
  @@index([organizationId])
  @@index([userId])
}

model FeedbackComment {
  id         String   @id
  createdAt  DateTime @default(now())
  feedbackId String
  authorId   String
  authorType String
  authorName String?
  content    String
  Feedback   Feedback @relation(fields: [feedbackId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([feedbackId])
}

model IdSequence {
  id        String   @id
  prefix    String   @unique
  lastValue Int      @default(0)
  updatedAt DateTime

  @@index([prefix])
}

model ImageUpload {
  id String @id
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model MyAccount {
  id                   String  @id
  company_name         String
  is_person            Boolean @default(false)
  email                String?
  email_accountant     String?
  phone_prefix         String?
  phone                String?
  mobile_prefix        String?
  mobile               String?
  fax_prefix           String?
  fax                  String?
  website              String?
  street               String?
  city                 String?
  state                String?
  zip                  String?
  country              String?
  country_code         String?
  billing_street       String?
  billing_city         String?
  billing_state        String?
  billing_zip          String?
  billing_country      String?
  billing_country_code String?
  currency             String?
  currency_symbol      String?
  VAT_number           String
  TAX_number           String?
  bank_name            String?
  bank_account         String?
  bank_code            String?
  bank_IBAN            String?
  bank_SWIFT           String?
  organizationId       String  @default("00000000-0000-0000-0000-000000000000")

  @@index([organizationId])
}

model Notification {
  id             String                  @id
  createdAt      DateTime                @default(now())
  updatedAt      DateTime
  userId         String
  organizationId String                  @default("00000000-0000-0000-0000-000000000000")
  type           NotificationCategory
  title          String
  message        String
  read           Boolean                 @default(false)
  readAt         DateTime?
  entityType     NotificationEntityType?
  entityId       String?
  metadata       Json?
  actorId        String?
  actorName      String?
  Users          Users                   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([actorId])
  @@index([createdAt])
  @@index([organizationId])
  @@index([read])
  @@index([type])
  @@index([userId])
}

model ProfileShowcaseProperty {
  id           String       @id
  profileId    String
  propertyId   String
  order        Int          @default(0)
  createdAt    DateTime     @default(now())
  AgentProfile AgentProfile @relation(fields: [profileId], references: [id], onDelete: Cascade)
  Properties   Properties   @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  @@unique([profileId, propertyId])
  @@index([order])
  @@index([profileId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Properties {
  id                                  String                    @id
  createdAt                           DateTime                  @default(now())
  createdBy                           String?
  updatedAt                           DateTime?
  updatedBy                           String?
  assigned_to                         String?
  property_name                       String
  primary_email                       String?
  property_type                       PropertyType?
  property_status                     PropertyStatus?           @default(ACTIVE)
  property_preferences                Json?
  communication_notes                 Json?
  address_street                      String?
  address_city                        String?
  address_state                       String?
  address_zip                         String?
  price                               Int?
  bedrooms                            Int?
  bathrooms                           Float?
  square_feet                         Int?
  lot_size                            Float?
  year_built                          Int?
  description                         String?
  watchers                            String[]
  organizationId                      String                    @default("00000000-0000-0000-0000-000000000000")
  accepts_pets                        Boolean?
  accessibility                       String?
  address_privacy_level               AddressPrivacyLevel?
  amenities                           Json?
  area                                String?
  available_from                      DateTime?
  build_coefficient                   Decimal?
  building_permit_no                  String?
  building_permit_year                Int?
  condition                           PropertyCondition?
  coverage_ratio                      Decimal?
  draft_status                        Boolean?                  @default(false)
  elevator                            Boolean?
  energy_cert_class                   EnergyCertClass?
  etaireia_diaxeirisis                String?
  floor                               String?
  floors_total                        Int?
  frontage_m                          Decimal?
  furnished                           FurnishedStatus?
  heating_type                        HeatingType?
  inside_city_plan                    Boolean?
  is_exclusive                        Boolean?                  @default(false)
  land_registry_kaek                  String?
  legalization_status                 LegalizationStatus?
  min_lease_months                    Int?
  monthly_common_charges              Decimal?
  municipality                        String?
  orientation                         Json?
  plot_size_sqm                       Decimal?
  portal_visibility                   PortalVisibility?
  postal_code                         String?
  price_type                          PriceType?
  renovated_year                      Int?
  size_gross_sqm                      Decimal?
  size_net_sqm                        Decimal?
  transaction_type                    TransactionType?
  Client_Properties                   Client_Properties[]
  Deal                                Deal[]
  ProfileShowcaseProperty             ProfileShowcaseProperty[]
  Users_Properties_assigned_toToUsers Users?                    @relation("Properties_assigned_toToUsers", fields: [assigned_to], references: [id])
  PropertyComment                     PropertyComment[]
  Property_Contacts                   Property_Contacts[]
  Documents                           Documents[]
  CalComEvent                         CalComEvent[]             @relation("EventToProperties")
  Users_watching_properties           Users[]                   @relation("watching_properties")

  @@index([assigned_to])
  @@index([createdAt])
  @@index([organizationId])
  @@index([portal_visibility])
  @@index([property_status])
}

model PropertyComment {
  id         String     @id
  createdAt  DateTime   @default(now())
  updatedAt  DateTime
  propertyId String
  userId     String
  content    String
  Properties Properties @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  Users      Users      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([propertyId])
  @@index([userId])
}

model Property_Contacts {
  id                 String      @id
  property           String?
  assigned_to        String?
  created_on         DateTime?   @default(now())
  updatedAt          DateTime?
  updatedBy          String?
  description        String?
  email              String?
  phone              String?
  contact_first_name String?
  contact_last_name  String
  contact_type       String?
  Users              Users?      @relation(fields: [assigned_to], references: [id])
  Properties         Properties? @relation(fields: [property], references: [id])
}

model SharedEntity {
  id                                     String           @id
  entityType                             SharedEntityType
  entityId                               String
  sharedById                             String
  sharedWithId                           String
  permissions                            SharePermission  @default(VIEW_COMMENT)
  message                                String?
  createdAt                              DateTime         @default(now())
  audienceId                             String?
  Audience                               Audience?        @relation(fields: [audienceId], references: [id])
  Users_SharedEntity_sharedByIdToUsers   Users            @relation("SharedEntity_sharedByIdToUsers", fields: [sharedById], references: [id], onDelete: Cascade)
  Users_SharedEntity_sharedWithIdToUsers Users            @relation("SharedEntity_sharedWithIdToUsers", fields: [sharedWithId], references: [id], onDelete: Cascade)

  @@unique([entityType, entityId, sharedWithId])
  @@index([audienceId])
  @@index([entityType, entityId])
  @@index([sharedById])
  @@index([sharedWithId])
}

model SocialPost {
  id                   String              @id
  createdAt            DateTime            @default(now())
  updatedAt            DateTime
  organizationId       String
  authorId             String
  postType             String
  content              String?
  linkedEntityId       String?
  linkedEntityType     String?
  linkedEntityTitle    String?
  linkedEntitySubtitle String?
  linkedEntityMetadata Json?
  Users                Users               @relation(fields: [authorId], references: [id], onDelete: Cascade)
  SocialPostComment    SocialPostComment[]
  SocialPostLike       SocialPostLike[]
  attachments          Attachment[]

  @@index([authorId])
  @@index([createdAt])
  @@index([organizationId])
  @@index([postType])
}

model SocialPostComment {
  id                      String              @id
  createdAt               DateTime            @default(now())
  updatedAt               DateTime
  postId                  String
  userId                  String
  content                 String
  parentId                String?
  SocialPostComment       SocialPostComment?  @relation("SocialPostCommentToSocialPostComment", fields: [parentId], references: [id], onDelete: Cascade)
  other_SocialPostComment SocialPostComment[] @relation("SocialPostCommentToSocialPostComment")
  SocialPost              SocialPost          @relation(fields: [postId], references: [id], onDelete: Cascade)
  Users                   Users               @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([parentId])
  @@index([postId])
  @@index([userId])
}

model SocialPostLike {
  id         String     @id
  createdAt  DateTime   @default(now())
  postId     String
  userId     String
  SocialPost SocialPost @relation(fields: [postId], references: [id], onDelete: Cascade)
  Users      Users      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([postId, userId])
  @@index([postId])
  @@index([userId])
}

model TodoList {
  id          String @id
  createdAt   String
  description String
  title       String
  url         String
  user        String
}

model UserNotificationSettings {
  id                    String   @id
  userId                String   @unique
  socialEmailEnabled    Boolean  @default(true)
  socialInAppEnabled    Boolean  @default(true)
  crmEmailEnabled       Boolean  @default(true)
  crmInAppEnabled       Boolean  @default(true)
  calendarEmailEnabled  Boolean  @default(true)
  calendarInAppEnabled  Boolean  @default(true)
  tasksEmailEnabled     Boolean  @default(true)
  tasksInAppEnabled     Boolean  @default(true)
  dealsEmailEnabled     Boolean  @default(true)
  dealsInAppEnabled     Boolean  @default(true)
  documentsEmailEnabled Boolean  @default(true)
  documentsInAppEnabled Boolean  @default(true)
  systemEmailEnabled    Boolean  @default(true)
  systemInAppEnabled    Boolean  @default(true)
  createdAt             DateTime @default(now())
  updatedAt             DateTime
  Users                 Users    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model Users {
  id                                                 String                        @id
  account_name                                       String?
  avatar                                             String?
  email                                              String                        @unique
  is_account_admin                                   Boolean                       @default(false)
  is_admin                                           Boolean                       @default(false)
  created_on                                         DateTime                      @default(now())
  lastLoginAt                                        DateTime?
  name                                               String?
  password                                           String?
  username                                           String?
  userStatus                                         ActiveStatus                  @default(PENDING)
  userLanguage                                       Language                      @default(en)
  watching_accountsIDs                               String[]
  watching_propertiesIDs                             String[]
  clerkUserId                                        String?                       @unique
  onboardingCompleted                                Boolean                       @default(false)
  analyticsConsent                                   Boolean                       @default(true)
  consentTimestamp                                   DateTime?
  gdprConsent                                        Boolean                       @default(false)
  marketingConsent                                   Boolean                       @default(false)
  firstName                                          String?
  lastName                                           String?
  AgentConnection_AgentConnection_followerIdToUsers  AgentConnection[]             @relation("AgentConnection_followerIdToUsers")
  AgentConnection_AgentConnection_followingIdToUsers AgentConnection[]             @relation("AgentConnection_followingIdToUsers")
  AgentProfile                                       AgentProfile?
  Audience                                           Audience[]
  AudienceMember                                     AudienceMember[]
  CalComEvent                                        CalComEvent[]
  ClientComment                                      ClientComment[]
  Client_Contacts_Client_Contacts_assigned_toToUsers Client_Contacts[]             @relation("Client_Contacts_assigned_toToUsers")
  Client_Contacts_Client_Contacts_created_byToUsers  Client_Contacts[]             @relation("Client_Contacts_created_byToUsers")
  Clients_Clients_assigned_toToUsers                 Clients[]                     @relation("Clients_assigned_toToUsers")
  Deal_Deal_clientAgentIdToUsers                     Deal[]                        @relation("Deal_clientAgentIdToUsers")
  Deal_Deal_propertyAgentIdToUsers                   Deal[]                        @relation("Deal_propertyAgentIdToUsers")
  DocumentView                                       DocumentView[]
  Documents_Documents_assigned_userToUsers           Documents[]                   @relation("Documents_assigned_userToUsers")
  Documents_Documents_created_by_userToUsers         Documents[]                   @relation("Documents_created_by_userToUsers")
  EventInvitee                                       EventInvitee[]
  Feedback                                           Feedback[]
  Notification                                       Notification[]
  Properties_Properties_assigned_toToUsers           Properties[]                  @relation("Properties_assigned_toToUsers")
  PropertyComment                                    PropertyComment[]
  Property_Contacts                                  Property_Contacts[]
  SharedEntity_SharedEntity_sharedByIdToUsers        SharedEntity[]                @relation("SharedEntity_sharedByIdToUsers")
  SharedEntity_SharedEntity_sharedWithIdToUsers      SharedEntity[]                @relation("SharedEntity_sharedWithIdToUsers")
  SocialPost                                         SocialPost[]
  SocialPostComment                                  SocialPostComment[]
  SocialPostLike                                     SocialPostLike[]
  UserNotificationSettings                           UserNotificationSettings?
  crm_Accounts_Tasks                                 crm_Accounts_Tasks[]
  crm_Accounts_Tasks_Comments                        crm_Accounts_Tasks_Comments[]
  openAi_keys                                        openAi_keys[]
  Clients_watching_accounts                          Clients[]                     @relation("watching_accounts")
  Properties_watching_properties                     Properties[]                  @relation("watching_properties")
  Attachment                                         Attachment[]

  @@index([clerkUserId])
  @@index([email])
  @@index([userStatus])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_Accounts_Tasks {
  id                                    String                        @id
  content                               String?
  createdAt                             DateTime?                     @default(now())
  createdBy                             String?
  updatedAt                             DateTime?
  updatedBy                             String?
  dueDateAt                             DateTime?                     @default(now())
  priority                              String
  tags                                  Json?
  title                                 String
  likes                                 Int?                          @default(0)
  user                                  String?
  account                               String?
  calcomEventId                         String?
  organizationId                        String                        @default("00000000-0000-0000-0000-000000000000")
  Clients                               Clients?                      @relation(fields: [account], references: [id])
  CalComEvent                           CalComEvent?                  @relation(fields: [calcomEventId], references: [id])
  Users                                 Users?                        @relation(fields: [user], references: [id])
  crm_Accounts_Tasks_Comments           crm_Accounts_Tasks_Comments[]
  Documents_DocumentsToCrmAccountsTasks Documents[]                   @relation("DocumentsToCrmAccountsTasks")
  Documents_DocumentsToTasksExplicit    Documents[]                   @relation("DocumentsToTasksExplicit")

  @@index([organizationId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_Accounts_Tasks_Comments {
  id                 String             @id
  comment            String
  createdAt          DateTime           @default(now())
  crm_account_task   String
  user               String
  organizationId     String             @default("00000000-0000-0000-0000-000000000000")
  crm_Accounts_Tasks crm_Accounts_Tasks @relation(fields: [crm_account_task], references: [id], onDelete: Cascade)
  Users              Users              @relation(fields: [user], references: [id])

  @@index([organizationId])
}

model gpt_models {
  id          String     @id
  model       String
  description String?
  status      gptStatus?
  created_on  DateTime?  @default(now())
}

model modulStatus {
  id        String  @id
  name      String
  isVisible Boolean
}

model openAi_keys {
  id              String @id
  user            String
  organization_id String
  api_key         String
  Users           Users  @relation(fields: [user], references: [id])
}

model systemServices {
  id              String  @id
  name            String
  serviceUrl      String?
  serviceId       String?
  serviceKey      String?
  servicePassword String?
  servicePort     String?
  description     String?
}

model system_Modules_Enabled {
  id       String  @id
  name     String
  enabled  Boolean
  position Int
}

enum ActiveStatus {
  ACTIVE
  INACTIVE
  PENDING
}

enum AddressPrivacyLevel {
  EXACT
  PARTIAL
  HIDDEN
}

enum CalendarEventType {
  PROPERTY_VIEWING
  CLIENT_CONSULTATION
  MEETING
  REMINDER
  TASK_DEADLINE
  OTHER
}

enum ClientContactType {
  PRIMARY
  SECONDARY
  EMERGENCY
  REFERRAL
}

enum ClientIntent {
  BUY
  RENT
  SELL
  LEASE
  INVEST
}

enum ClientStatus {
  LEAD
  ACTIVE
  INACTIVE
  CONVERTED
  LOST
}

enum ClientType {
  BUYER
  SELLER
  RENTER
  INVESTOR
  REFERRAL_PARTNER
}

enum ConnectionStatus {
  PENDING
  ACCEPTED
  REJECTED
}

enum DealStatus {
  PROPOSED
  NEGOTIATING
  ACCEPTED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum DocumentSystemType {
  INVOICE
  RECEIPT
  CONTRACT
  OFFER
  OTHER
}

enum EnergyCertClass {
  A_PLUS
  A
  B
  C
  D
  E
  F
  G
  H
  IN_PROGRESS
}

enum FinancingType {
  CASH
  MORTGAGE
  PREAPPROVAL_PENDING
}

enum FurnishedStatus {
  NO
  PARTIALLY
  FULLY
}

enum HeatingType {
  AUTONOMOUS
  CENTRAL
  NATURAL_GAS
  HEAT_PUMP
  ELECTRIC
  NONE
}

enum InviteStatus {
  PENDING
  ACCEPTED
  DECLINED
  TENTATIVE
}

enum Language {
  cz
  en
  de
  uk
  el
}

enum LeadSource {
  REFERRAL
  WEB
  PORTAL
  WALK_IN
  SOCIAL
}

enum LegalizationStatus {
  LEGALIZED
  IN_PROGRESS
  UNDECLARED
}

enum NotificationCategory {
  ACCOUNT_UPDATED
  ACCOUNT_DELETED
  ACCOUNT_TASK_CREATED
  ACCOUNT_TASK_UPDATED
  CALENDAR_REMINDER
  CALENDAR_EVENT_CREATED
  CALENDAR_EVENT_UPDATED
  CALENDAR_EVENT_CANCELLED
  PROPERTY_UPDATED
  PROPERTY_DELETED
  DOCUMENT_SHARED
  SYSTEM
  CLIENT_CREATED
  CLIENT_ASSIGNED
  PROPERTY_CREATED
  PROPERTY_ASSIGNED
  CALENDAR_EVENT_INVITED
  DOCUMENT_VIEWED
  SOCIAL_POST_LIKED
  SOCIAL_POST_COMMENTED
  SOCIAL_POST_MENTIONED
  ENTITY_SHARED_WITH_YOU
  ENTITY_SHARE_ACCEPTED
  CONNECTION_REQUEST
  CONNECTION_ACCEPTED
  DEAL_PROPOSED
  DEAL_UPDATED
  DEAL_ACCEPTED
  DEAL_COMPLETED
  TASK_ASSIGNED
  TASK_COMMENT_ADDED
  TASK_DUE_SOON
  WELCOME
  ACCOUNT_WARNING
  ACCOUNT_SUSPENSION
  ACCOUNT_UNSUSPENSION
  ACCOUNT_DELETION_NOTICE
  FEEDBACK_RESPONSE
}

enum NotificationEntityType {
  ACCOUNT
  PROPERTY
  CALENDAR_EVENT
  TASK
  DOCUMENT
  SOCIAL_POST
  DEAL
  CONNECTION
  USER
  FEEDBACK
}

enum NotificationType {
  EMAIL
  IN_APP
}

enum PersonType {
  INDIVIDUAL
  COMPANY
  INVESTOR
  BROKER
}

enum PortalVisibility {
  PRIVATE
  SELECTED
  PUBLIC
}

enum PriceType {
  RENTAL
  SALE
  PER_ACRE
  PER_SQM
}

enum ProfileVisibility {
  PERSONAL
  SECURE
  PUBLIC
}

enum PropertyCondition {
  EXCELLENT
  VERY_GOOD
  GOOD
  NEEDS_RENOVATION
}

enum PropertyPurpose {
  RESIDENTIAL
  COMMERCIAL
  LAND
  PARKING
  OTHER
}

enum PropertyStatus {
  ACTIVE
  PENDING
  SOLD
  OFF_MARKET
  WITHDRAWN
}

enum PropertyType {
  RESIDENTIAL
  COMMERCIAL
  LAND
  RENTAL
  VACATION
  APARTMENT
  HOUSE
  MAISONETTE
  WAREHOUSE
  PARKING
  PLOT
  FARM
  INDUSTRIAL
  OTHER
}

enum ReminderStatus {
  PENDING
  SENT
  FAILED
  CANCELLED
}

enum SharePermission {
  VIEW_ONLY
  VIEW_COMMENT
}

enum SharedEntityType {
  PROPERTY
  CLIENT
  DOCUMENT
}

enum TemplateType {
  BROKERAGE_MANDATE
  LEASE_AGREEMENT
  HANDOVER_PROTOCOL
  VIEWING_CONFIRMATION
}

enum Timeline {
  IMMEDIATE
  ONE_THREE_MONTHS
  THREE_SIX_MONTHS
  SIX_PLUS_MONTHS
}

enum TransactionType {
  SALE
  RENTAL
  SHORT_TERM
  EXCHANGE
}

enum gptStatus {
  ACTIVE
  INACTIVE
}

// ============================================
// ATTACHMENTS - Reusable file attachments
// ============================================

model Attachment {
  id             String   @id @default(uuid())
  createdAt      DateTime @default(now())
  organizationId String
  uploadedById   String

  // File metadata
  fileName String
  fileSize Int    // bytes
  fileType String // MIME type
  url      String // Vercel Blob URL

  // Polymorphic relation - only one should be set
  socialPostId String?
  feedbackId   String?

  // Relations
  socialPost SocialPost? @relation(fields: [socialPostId], references: [id], onDelete: Cascade)
  feedback   Feedback?   @relation(fields: [feedbackId], references: [id], onDelete: Cascade)
  uploadedBy Users       @relation(fields: [uploadedById], references: [id], onDelete: Cascade)

  @@index([socialPostId])
  @@index([feedbackId])
  @@index([organizationId])
  @@index([uploadedById])
}
